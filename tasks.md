# Tasks

## mvp

- [x] add convex
- [x] set username
- [x] dice rolls
- character sheets
  - [x] name
  - [x] text fields
  - [x] image
  - [x] number fields
  - [x] multiline text fields
  - [x] dice fields
  - [x] createdBy (in database)
  - [x] buttons next to dice fields to roll them, automatically includes fatigue
- token grid
  - [x] infinite grid
  - [x] left-click and drag to move viewport
  - [x] add a `mapTokens` table to the database
  - [x] add token properties to characters
  - [x] rendering database tokens
  - [x] rendering character tokens
  - [x] drag token to move it
  - [x] add token from character
  - [x] remove token
  - [x] configurable token-level health and fatigue
  - [x] link tokens to characters - each token uses the character's values as fallbacks, but can be set individually
  - [x] button to set background image from upload
  - [x] hide menu while dragging token
  - [x] hide token tags unless selected

## priority

- general axiom:
  - the only difference between the player and the GM is what the player can see and control
- [x] simplify images
- [x] hardcode the character data schema
- [x] make characters and tokens equivalent
- rooms
  - [x] list rooms you own
  - [x] set room owner on creation
  - only room owner can:
    - [x] delete room
    - [x] add or remove characters
    - [x] make characters public or private
    - [x] show/hide tokens
- players
  - [x] add `players` property to room
  - [x] when a player joins a room, add their user ID to the list
  - [x] owner-only dropdown to assign character to player
  - [x] player only sees their own character
  - [x] player _cannot_ add or remove their own token
  - [x] player can only control their own token
  - [x] notes field
- tokens
  - [x] fix name tag blocking clicks
  - [x] translucent to the owner when hidden
  - [x] show damage and fatigue bars, where the owner can see all of them and players can only see their own
  - [ ] arrow keys to move token
- map
  - [x] conform to background image size
  - [x] configure cell size in pixels
  - [x] zooming
- characters
  - [x] pronouns field
  - [x] show stress thresholds
  - [x] separate visibility for character browser and tokens + let players browse visible characters
  - [x] hide fields for players that don't have permission to edit them
  - [ ] duplicate button
  - [ ] update checkbox and select values immediately
- dice
  - [x] roll boost and snag dice with attributes
  - [ ] give a special appearance for boost and snag dice
  - [ ] show the effect, base, boost, and snag values

## features

- [ ] show a list of usable actions/skills somewhere (the dice roller probably)
- rooms
  - [ ] list rooms you've joined
  - [ ] only room owner can change room background
  - [ ] add a player list panel where you can configure players' characters
- characters
  - [ ] open in a pop-out window
  - [ ] items
  - [ ] show a warning when dice aren't unique
  - [ ] race field
  - [ ] aspect skill picker
  - [ ] experience field
  - [ ] limit aspect skills based on experience
  - [ ] turn character sidebar into a drawer / overlay
  - [ ] allow users to set a crop region for the token
- token map
  - [ ] client-side logarhythmic background brightness slider
  - [ ] client-side logarhythmic grid brightness slider
  - [x] persist viewport position and zoom level
  - [ ] drag inertia
  - [ ] right click menu on tokens with shortcuts for convenience
  - [ ] token deselection to hide side panel
  - [ ] measuring distance
  - [ ] draw lines
  - [ ] draw squares
  - [ ] add new token to center of screen and/or click to place token
  - [ ] disallow attempted movement clientside
  - [ ] player cursors
  - [ ] custom token sizes
  - [ ] set background from drag and drop
  - [x] button to reset viewport
  - [ ] H shortcut to hide or show
  - [ ] move camera when dragging token to edge of viewport
  - [ ] non-character tokens
  - [ ] focus viewport on token when a character is selected on the sidebar
- dice
  - [ ] improve dice button layout
- [x] move health & fatigue to tokens

## ideas

- a command or button to bring up info about a specific game topic, like skills or races
- move the game doc content entirely to the website
- some kind of map grid with tokens
- drag and drop to change room background and/or map
- music via YouTube embeds
- character sheets with arbitrary counters and field
- NPC generation and tracking
- buttons on character sheets to make specific rolls for skills and other actions
- custom dice macros?
- export and import individual characters as json
- button to randomize character names
- chat
